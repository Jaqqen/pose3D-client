(this["webpackJsonppose3d-client-frontend"]=this["webpackJsonppose3d-client-frontend"]||[]).push([[0],{19:function(e,t,n){e.exports=n(36)},24:function(e,t,n){},25:function(e,t,n){},32:function(e,t){},33:function(e,t){},34:function(e,t){},35:function(e,t,n){e.exports=n.p+"static/media/dURRLkVfHr7ZRqTSHeHTEj-1366-80.95c13657.jpg"},36:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(16),o=n.n(i),c=(n(24),n(3)),s=n(5),u=n(6),l=n(2),d=n(8),h=n(7),f=(n(25),n(4)),p=n.n(f),g=n(9),v=n(17),m=n.n(v),b=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).setSrcReferenceInPoseMain=a.setSrcReferenceInPoseMain.bind(Object(l.a)(a)),a.webcamRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setSrcReferenceInPoseMain()}},{key:"setSrcReferenceInPoseMain",value:function(){var e=this.props.getVideoSrcOnPlay,t=this.webcamRef.current.video;t.addEventListener("loadedmetadata",(function(){t.height=t.clientHeight,e(t)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{ref:this.webcamRef,audio:!1,width:700,screenshotFormat:"image/jpeg",screenshotQuality:1}))}}]),n}(a.Component),O=n(18),w=function(){var e=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a({architecture:"ResNet50",outputStride:32,inputResolution:{width:257,height:200},quantBytes:2});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e,t){return new Promise((function(n){n(e.estimateSinglePose(t,{flipHorizontal:!1,maxDetections:5,scoreThreshold:.1,nmsRadius:20}))}))},y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={_srcRef:e.srcRef,_posenetModel:e._posenetModel},a.captureVideo=a.captureVideo.bind(Object(l.a)(a)),a.drawGrid=a.drawGrid.bind(Object(l.a)(a)),a.drawJoint=a.drawJoint.bind(Object(l.a)(a)),a.drawJoints=a.drawJoints.bind(Object(l.a)(a)),a.drawJointByPart=a.drawJointByPart.bind(Object(l.a)(a)),a.getPoseCoordinates=a.getPoseCoordinates.bind(Object(l.a)(a)),a.setDimensions=a.setDimensions.bind(Object(l.a)(a)),a.canvasRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.srcType,n=this.canvasRef.current.getContext("2d"),a=this.setDimensions(),"image"!==t){e.next=8;break}return e.next=6,this.getPoseCoordinates();case 6:r=e.sent,this.drawJoints(r,n);case 8:"video"===t&&this.captureVideo(n,a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDimensions",value:function(){var e=this.state._srcRef,t=e.width,n=e.height;return this.canvasRef.current.width=t,this.canvasRef.current.height=n,{height:n,width:t}}},{key:"captureVideo",value:function(e,t){var n=this,a=this.state,r=a._posenetModel,i=a._srcRef;i.onplay=function(){var a=function(){var o=Object(g.a)(p.a.mark((function o(){var c;return p.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,j(r,i);case 2:c=o.sent,e.clearRect(0,0,t.width,t.height),n.drawJoints(c,e),requestAnimationFrame(a);case 6:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();requestAnimationFrame(a)}}},{key:"getPoseCoordinates",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t._posenetModel,a=t._srcRef,e.next=3,j(n,a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"drawJoints",value:function(e,t){var n=this;e.keypoints.forEach((function(e){if(e.score>=.5){var a=e.position,r=a.x,i=a.y;n.drawJointByPart(r,i,e.part,t)}}))}},{key:"drawJointByPart",value:function(e,t,n,a){"nose"===n?this.drawJoint(e,t,"red",a):"leftEye"===n||"rightEye"===n?this.drawJoint(e,t,"blue",a):"leftEar"===n||"rightEar"===n?this.drawJoint(e,t,"green",a):"leftShoulder"===n||"rightShoulder"===n?this.drawJoint(e,t,"orange",a):"leftElbow"===n||"rightElbow"===n?this.drawJoint(e,t,"violet",a):"leftWrist"===n||"rightWrist"===n?this.drawJoint(e,t,"magenta",a):"leftHip"===n||"rightHip"===n?this.drawJoint(e,t,"black",a):"leftKnee"===n||"rightKnee"===n?this.drawJoint(e,t,"yellow",a):"leftAnkle"!==n&&"rightAnkle"!==n||this.drawJoint(e,t,"cyan",a)}},{key:"drawJoint",value:function(e,t,n,a){var r=function(e){return e%Math.trunc(e)>.5?Math.ceil(e):Math.floor(e)};a.beginPath(),a.arc(r(e),r(t),6,0,2*Math.PI,!1),a.fillStyle=n,a.fill(),a.lineWidth=2,a.strokeStyle="#ffffff",a.stroke()}},{key:"drawGrid",value:function(e){for(var t=this.state._srcRef,n=t.width,a=t.height,r=0;r<=n;r+=10)e.moveTo(r,0),e.lineTo(r,a);for(var i=0;i<=a;i+=10)e.moveTo(0,i),e.lineTo(n,i);e.strokeStyle="black",e.stroke()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"canvas-container"},r.a.createElement("canvas",{ref:this.canvasRef,width:100,height:100})))}}]),n}(a.Component),P=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setSrcReferenceInPoseMain=n.setSrcReferenceInPoseMain.bind(Object(l.a)(n)),n.imageRef=r.a.createRef(),n}return Object(u.a)(a,[{key:"setSrcReferenceInPoseMain",value:function(){(0,this.props.getImageSrcOnLoad)(this.imageRef.current)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{onLoad:this.setSrcReferenceInPoseMain,ref:this.imageRef,alt:"obama",id:"xyz2",style:{maxHeight:"500px"},src:n(35)}))}}]),a}(a.Component),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={container:{height:0,width:0},_posenetModel:null,hasImageSrcLoaded:!1,hasVideoSrcLoaded:!1,_srcRef:null,srcPanelIdentifier:"video"},a.getPosenetModel=a.getPosenetModel.bind(Object(l.a)(a)),a.getImageSrcOnLoad=a.getImageSrcOnLoad.bind(Object(l.a)(a)),a.getVideoSrcOnPlay=a.getVideoSrcOnPlay.bind(Object(l.a)(a)),a.getPoseCanvas=a.getPoseCanvas.bind(Object(l.a)(a)),a.getSrcPanel=a.getSrcPanel.bind(Object(l.a)(a)),a.srcContainerRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getPosenetModel()}},{key:"getPosenetModel",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,this.setState({_posenetModel:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getImageSrcOnLoad",value:function(e){var t=this.state.container;this.setState({container:Object(c.a)(Object(c.a)({},t),{},{height:e.height,width:e.width}),hasImageSrcLoaded:!0,_srcRef:e})}},{key:"getVideoSrcOnPlay",value:function(e){var t=this.state.container;this.setState({container:Object(c.a)(Object(c.a)({},t),{},{height:e.height,width:e.width}),hasVideoSrcLoaded:!0,_srcRef:e})}},{key:"getPoseCanvas",value:function(){var e=this.state,t=e.hasImageSrcLoaded,n=e.hasVideoSrcLoaded,a=e._posenetModel,i=e._srcRef,o=null;return n&&(o="video"),t&&(o="image"),null!==o?r.a.createElement(y,{srcType:o,srcRef:i,_posenetModel:a}):null}},{key:"getSrcPanel",value:function(){var e=this.state.srcPanelIdentifier;return"image"===e?r.a.createElement(P,{getImageSrcOnLoad:this.getImageSrcOnLoad}):"video"===e?r.a.createElement(b,{getVideoSrcOnPlay:this.getVideoSrcOnPlay}):null}},{key:"getPoseMainContentPanel",value:function(){var e=this.state,t=e._posenetModel,n=e.container;return t?r.a.createElement("div",{style:{height:n.height+"px",width:n.width+"px"},className:"posemain-container"},this.getPoseCanvas(),this.getSrcPanel()):".-`\xb4-. Loading... .-`\xb4-."}},{key:"render",value:function(){return this.getPoseMainContentPanel()}}]),n}(a.Component),k=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"startpagemain-container"},r.a.createElement("h1",null," Welcome to Pose3D "),r.a.createElement("p",null,"Please follow the instructions in the following page after clicking on ",r.a.createElement("b",null,"Start")),r.a.createElement("div",{className:"startpagemain-button-container"},r.a.createElement("button",{autoFocus:!0,onClick:this.props.renderMainAppPanel},"Start")))}}]),n}(a.Component),R=n(10);function M(){var e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!0,e.interimResults=!1,e.lang="en-US",e.start();var t={},n=0,i=!1,o=function(e){i=e};return Object(a.useEffect)((function(){e.onstart=function(){console.log("VoiceHandler has entered: ONSTART")},e.onresult=function(e){var a,r,i=e.results;for(var o in Object.keys(i)){var s=i[o][0];null===s&&void 0===s||(a=o,r=s,t=Object(c.a)(Object(c.a)({},t),{},Object(R.a)({},n,Object(c.a)(Object(c.a)({},t[n]),{},Object(R.a)({},a,r)))))}console.log(t)},e.onend=function(){console.info("VOICE IS DYING...."),0===Object.keys(t[n]).length&&delete t[n],i?o(!1):n+=1,t=Object(c.a)(Object(c.a)({},t),{},Object(R.a)({},n,{})),e.start()},e.onerror=function(e){o(!0),console.error(e)}})),r.a.createElement("span",{id:"voice-handler"},"V2E")}var E=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).initState={hasMainAppStarted:!1},a.state=Object(c.a)({},a.initState),a.renderMainAppPanel=a.renderMainAppPanel.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"renderMainAppPanel",value:function(){var e=window.confirm("Enable Webcam to start tracking?");this.setState({hasMainAppStarted:e})}},{key:"getContentPanel",value:function(){return this.state.hasMainAppStarted?r.a.createElement("div",{className:"App"},r.a.createElement(S,null),r.a.createElement(M,null)):r.a.createElement(k,{renderMainAppPanel:this.renderMainAppPanel})}},{key:"render",value:function(){return this.getContentPanel()}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.739d3007.chunk.js.map